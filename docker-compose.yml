services:
  # Qdrant - Vector database for session embeddings
  qdrant:
    image: qdrant/qdrant:latest
    container_name: qdrant
    ports:
      - "6333:6333"
      - "6334:6334"
    volumes:
      - qdrant_data:/qdrant/storage
    # Note: To use API key, set QDRANT_API_KEY environment variable
    # or add to .env file: QDRANT_API_KEY=your-secret-key
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:6333/"]
      interval: 10s
      timeout: 5s
      retries: 5
    restart: unless-stopped
    networks:
      - workspace

volumes:
  qdrant_data:
    name: qdrant_data

networks:
  workspace:
    name: workspace
    driver: bridge

# Usage:
# Start services:     docker-compose up -d
# View logs:          docker-compose logs -f
# Check status:       docker-compose ps
# Shell access:       docker-compose exec qdrant bash
#
# ⚠️  IMPORTANT: Qdrant stores your session embeddings
#     - Do NOT use 'docker-compose down' without backup
#     - Always backup before major changes
